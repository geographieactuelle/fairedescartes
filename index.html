<!DOCTYPE html>
<html lang="en">
<head>
<title>Custom Map</title>
</head>
<body>
<svg id="svgmap" width="1440" height="590">
<g id="polygroup"></g>
<rect x="500" y="500" id="dataInfoBox" width="145" height="30" fill-opacity="0.85" fill="rgba(255,255,255,50)" style="stroke-width: 3; stroke: rgb(0, 0, 0); visibility: hidden; z-index:3;"></rect>
<g id="dataInfo"></g>
</svg>
<canvas id="canvas"></canvas>
<script src="autogenerated.js"></script>
<script src="svgscript.js"></script>
<script type="module">
import { Canvg } from 'https://cdn.skypack.dev/canvg@^4.0.0';
function download(){
const svg_element = document.getElementById("svgmap");
const svg_string = svg_element.outerHTML;
const canvas = document.querySelector("canvas");
const ctx = canvas.getContext("2d");
const v = Canvg.fromString(ctx, svg_string);

v.start();
var anchor = document.createElement("a");
anchor.href = canvas.toDataURL("image/png");
anchor.download = "my_map.png";
anchor.click();
canvas.remove();
anchor.remove();
}
if(data["download"] == true){
download();
}
</script>

</body>
</html>
